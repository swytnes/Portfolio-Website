/* =========================================================
   Projects — fully scoped (no carousel.css needed)
   ======================================================= */

/* Layout: push panel to the right in your split layout */
#projects{
  --gutter-right: 5rem;
  padding-right: max(12px, env(safe-area-inset-right));
}
#projects.layout-split-right{ column-gap: 0; }

/* Panel sizing + inner margins (breathing room) */
#projects .panel {
  justify-self: start;                 /* stick to left side of grid/section */
  position: absolute;                  /* allow manual positioning */
  left: 1000px;                         /* move box 200px from the left edge */
  width: 2000px;                       /* make the panel wider */
  padding-inline: clamp(18px, 3vw, 32px);
  padding-block: clamp(14px, 2.2vw, 26px);
  min-height: calc(var(--card-h, 380px) + 20px); /* panel height relative to cards */
  overflow: hidden;                    /* clip content to the box */
  border-radius: 1rem;                 /* rounded corners */
  background: rgba(255,255,255,0.04);  /* glassy background */
  backdrop-filter: blur(10px);         /* frosted glass effect */
}


/* Stage wrapper: actually holds the carousel */
#projects .stage{
  position: relative;
  overflow: visible;                    /* allow cards + shadows to show */
  margin-left: 25rem;
}

/* ===== Local “carousel base” (scoped) ===== */
#projects .carousel{
  position: relative;
  isolation: isolate;
  --gap: 1.1rem;
  --card-w: clamp(280px, 52vmin, 520px);
  --card-pad: clamp(.9rem, 2.2vmin, 1.25rem);
  margin-top: clamp(8px, 1.2vh, 16px);  /* nudge deck below title */
}

/* Hide native scrollbars on the inner rail (defensive) */
#projects .carousel .rail{ scrollbar-width:none; }
#projects .carousel .rail::-webkit-scrollbar{ display:none; }

/* ===== Cover-flow variant ===== */
#projects .carousel.coverflow{
  /* Stage & behavior knobs */
  --card-h: 380px;                       /* taller default */
  --max-spread: 3;                       /* fewer visible neighbors */
  --center-ratio: .50;                   /* true center */
  --spacing: calc(var(--card-w) * 1.28);
  --scale-step: .14;
  --opacity-step: .42;
  --blur-step: 1.2px;
  --tilt: 8deg;
  perspective: 900px;
}

/* Replace horizontal grid rail with a positioned stage */
#projects .carousel.coverflow .rail{
  position: relative;
  display: block;
  height: var(--card-h);
  overflow: visible;
  padding: 0;
}

/* Cards (absolute); JS augments transform */
#projects .carousel.coverflow .card{
  position: absolute;
  top: 50%; left: 50%;
  width: var(--card-w);
  transform: translate(-50%, -50%);
  transform-origin: center;
  will-change: transform, filter, opacity;
  transition: transform .35s ease, filter .35s ease, opacity .35s ease;

  backdrop-filter: none !important;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.16);
  border-radius:1rem;
  padding:var(--card-pad);
  box-shadow:0 10px 30px rgba(0,0,0,.22);
}
#projects .carousel.coverflow .card[aria-selected="true"]{
  backdrop-filter: none;                 /* hero plate, no smear */
  background: rgb(46, 45, 45);
  opacity: 1 !important;
  filter: none !important;
  z-index: 1100 !important;
  transform: translate(-50%,-50%) scale(1.02);
  box-shadow:0 16px 40px rgba(0,0,0,.30);
  border-color:rgba(255,255,255,.28);
}

/* Disable the global soft-edge film for Projects cover-flow */
#projects .carousel.coverflow::before,
#projects .carousel.coverflow::after{ display: none !important; }

/* ===== Chips & buttons used inside project cards ===== */
#projects .chips{ display:flex; gap:.4rem; flex-wrap:wrap; margin:.5rem 0 .8rem; }
#projects .chips span{
  font-size:.8rem; opacity:.85;
  border:1px solid rgba(255,255,255,.18);
  padding:.15rem .5rem; border-radius:.6rem;
}
#projects .btn{
  padding:.55rem .9rem; border-radius:.7rem; border:0; cursor:pointer;
  background:#e5e7eb; color:#0b1120; font-weight:600;
}
#projects .btn.secondary{
  background:transparent; color:inherit;
  border:1px solid rgba(255,255,255,.26);
}
#projects .btn:focus-visible{ outline:2px solid #93c5fd; outline-offset:2px; }

/* ===== Arrows (visual style + placement on panel edges) ===== */
#projects .panel .arrow{
  position: absolute;
  z-index: 5;
  top: 50%;
  transform: translateY(-50%);
  inset-block: auto; margin: 0;
  width: 44px; height: 44px; border-radius:999px;
  border:1px solid rgba(255,255,255,.25);
  background:rgba(255,255,255,.10); backdrop-filter:blur(6px);
  display:grid; place-items:center; cursor:pointer;
}
#projects .panel .arrow.prev{ left: 12px; }
#projects .panel .arrow.next{ right: 12px; }

/* ===== Responsive tweaks ===== */
@media (max-width: 1200px){
  #projects .panel{ width: min(1200px, calc(100% - 5vw)); }
}
@media (max-width: 900px){
  #projects .panel{
    width: min(100%, calc(100% - 4vw));
    padding-inline: clamp(12px, 3vw, 20px);
  }
  #projects .carousel.coverflow{
    --center-ratio: .5;
    --spacing: calc(var(--card-w) * 1.02);
    --blur-step: .18px;
  }
}

